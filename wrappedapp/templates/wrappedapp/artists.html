{% extends 'wrappedapp/base.html' %}

{% block content %}
  <header class="dashboard-header">
    <div class="header-top">
      <h1>Your Top Artists</h1>
      {% if user_name %}
        <p class="user-greeting">Logged in as <strong>{{ user_name }}</strong></p>
      {% endif %}
    </div>

    <div class="forms-container">
      <form action="{% url 'artists' %}" method="get" class="time-form">
        <label for="time_range">Time Range:</label>
        <select name="time_range" id="time_range" onchange="this.form.submit()">
          <option value="short_term" {% if range == 'short_term' %}selected{% endif %}>Last 4 Weeks</option>
          <option value="medium_term" {% if range == 'medium_term' %}selected{% endif %}>Last 6 Months</option>
          <option value="long_term" {% if range == 'long_term' %}selected{% endif %}>All Time</option>
        </select>
      </form>
    </div>
  </header>

  <main class="tracks-container">
    {% if artists %}
      {% for artist in artists %}
        <div class="artist-card">
          <img src="{{ artist.images.0.url }}" alt="{{ artist.name }}" class="artist-photo">
          <div class="artist-info">
            <h3>{{ artist.name }}</h3>
          </div>
        </div>
      {% endfor %}
    {% else %}
      <p class="no-tracks">No artists found.</p>
    {% endif %}
  </main>
{% endblock %}
